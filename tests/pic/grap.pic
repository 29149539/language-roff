.ps 14
.vs 18
.G1 4 \" Comment
frame ht 2 wid 2
label left "Response" "Variable" left .5
label bot "Factor Variable"
line from 0,0 to 1,1p
line dotted from .5,0 to .5,1
define blob { "\v'.1m'\(bu\v'-.1m'" }
blob at 0,.5; blob at .5,.5; blob at 1,.5
ticks off
circle radius
draw
next + - * / ^

pic box at 0,2

if else then else

bot thru through
.G2
.ps
.vs



# Real examples start here (Source: CSTR #114)
.G1 12

frame ht 1 wid 3
draw solid
pi = atan2(0,-1)
for i from 0 to 2*pi by .1 do { next at i, sin(i) }


label left "Heights in Feet" "(Median and" "fifth percentiles)"
label bot "Heights of Boys in U.S., ages 2 to 18"
cmpft = 30.48  # Centimetres per foot
minx = 1e12; maxx = -1e12
n = sigx = sigx2 = sigy = sigxy = 0
copy "boyhts.d" thru {
	line from $1, $2/cmpft to $1, $4/cmpft
	ty = $3/cmpft
	bullet at $1,ty
	n = n+1
	sigx = sigx+$1; sigx2 = sigx2+$1*$1
	sigy = sigy+ty; sigxy = sigxy+$1*ty
	minx = min(minx,$1); maxx = max(maxx,$1)
}
# Calculate least squares fit and draw it
slope = (n*sigxy - sigx*sigy) / (n*sigx2 - sigx*sigx)
inter = (sigy - slope*sigx) / n
line from minx, slope*minx+inter to maxx, slope*maxx+inter



frame invis wid 4 ht 2.5 bot solid
ticks bot out from 0 to 25 by 5
ticks left off
label bot "Populations (in Millions) of the 50 States"
coord x 0,25 y 0,13
copy "states3.d" thru { "$1" size -4 at $2+.5, $3+.5 }

frame invis bot solid left solid
label bot "Populations (in Millions) of the 50 States"
label left "Number" "of" "States" left .3
ticks bot out from 0 to 25 by 5
coord x 0, 25 y 0, 13
copy "states2.d" thru {
	line dotted from $1+.5, 0 to $1+.5, $2
	"\(bu" size +3 at $1+.5, $2
}


frame ht 4 wid 5
label left "Rank in" "Population"
label bot "Population (Millions)"
label top "$log sub 2$ (Population)"
coord x .3,30 y 0,51 log x
define L { (2.0^$1)/1e6 "$1" }
ticks bot out at .5, 1, 2, 5, 10, 20
ticks left out from 10 to 50 by 10
ticks top out at L(19), L(20), L(21), L(22), L(23), L(24)
thisy = 50
copy "states.d" thru {
	"$1" size -4 at ($3/1e6, thisy)
	thisy = thisy-1
}
line dotted from 15.3,1 to .515,50



graph A
frame ht 1.66667 wid 1.66667
label bot "Male_Officers"
label left "Enlisted_Men"
coord log x log y
ticks off
copy "army.d" thru { "\s-3$1\s+3" at $2,$4 }
#
graph A with .Frame.w at A.Frame.e +(.1,0)
frame ht 1.66667 wid 1.66667
label bot "Female_Officers"
coord log x log y
ticks off
copy "army.d" thru { "\s-3$1\s+3" at $3,$4 }
#
graph A with .Frame.w at A.Frame.e +(.1,0)
frame ht 1.66667 wid 1.66667
label bot "Enlisted_Women"
coord log x log y
ticks off

copy "army.d" thru { "\s-3$1\s+3" at $5,$4 }


coord x 38,85 y .8,10000 log y
label bot "U.S. Army Personnel"
label left "Thousands" left .3
draw of solid   # Officers Female
draw ef dashed  # Enlisted Female
draw om dotted  # Officers Male
draw em solid   # Enlisted Male
copy "army.d" thru {
	next of at $1,$3
	next ef at $1,$5
	next om at $1,$2
	next em at $1,$4
}
copy thru { "$1 $2" size -3 at 60,$3 } until "XXX"
Enlisted Men 1200
Male Officers 140
Enlisted Women 12
Female Officers 2.5
XXX


label left "Population" "in Millions" left .2
label right "$x$ re-expressed as" "" \
	"$space 0 left ( {date - 1600} over 100 right ) sup 7$" left 1.2
define newx { exp(7*(log(($1-1600)/100))) }
ticks bot out at newx(1800) "1800", newx(1850) "1850",\
	newx(1900) "1900"
copy "usapop.d" thru {
	if $1 <= 1900 then { bullet at newx($1),$2 }
}
